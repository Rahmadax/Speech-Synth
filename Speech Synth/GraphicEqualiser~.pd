#N canvas -8 -8 1920 997 10;
#X obj 267 1 cnv 15 438 118 empty empty empty 20 12 0 14 -163519 -66577
0;
#X obj 290 36 cnv 15 400 60 empty empty empty 20 12 0 14 -262144 -66577
0;
#X obj -238 202 outlet~;
#N canvas 32 276 455 494 fft-analysis 0;
#X obj 15 71 *~;
#X obj 15 13 inlet~;
#X obj 15 102 rfft~;
#X obj 30 43 tabreceive~ \$0-hann;
#X obj 15 316 *~;
#X obj 48 316 *~;
#X obj 72 13 block~ 512 4;
#X obj 82 171 tabreceive~ \$0-gain;
#X obj 76 225 *~;
#X obj 15 411 *~;
#X obj 30 383 tabreceive~ \$0-hann;
#X obj 71 280 /~ 768;
#X obj 71 251 *~;
#X obj 15 352 rifft~;
#X obj 15 444 outlet~;
#X obj 82 198 clip~ 0 1;
#X text 156 42 <= window the incoming block;
#X text 58 101 <= compute the FFT;
#X text 209 170 <= get the gain profile;
#X text 148 197 <= ignore values outside the range;
#X text 104 237 <= quartic scaling for easy editing;
#X text 119 279 <= normalise by 512 x 3/2;
#X text 75 314 <= modify the real and imaginary amplitudes;
#X text 62 350 <= compute the inverse FFT;
#X text 159 382 <= window the result;
#X text 157 11 <= blocks of 512 samples at intervals of 128;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 2 1 5 0;
#X connect 3 0 0 1;
#X connect 4 0 13 0;
#X connect 5 0 13 1;
#X connect 7 0 15 0;
#X connect 8 0 12 0;
#X connect 8 0 12 1;
#X connect 9 0 14 0;
#X connect 10 0 9 1;
#X connect 11 0 4 1;
#X connect 11 0 5 1;
#X connect 12 0 11 0;
#X connect 13 0 9 0;
#X connect 15 0 8 0;
#X connect 15 0 8 1;
#X restore -238 161 pd fft-analysis;
#X obj 640 236 s \$0-gain;
#X obj 639 135 loadbang;
#N canvas 781 241 684 300 (subpatch) 0;
#X array \$0-gain 256 float 1;
#A 0 0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91 0.91
0.91 0.91 0.91 0.49 0.49 0.49 0.49 0.49 0.49 0.49 0.49 0.49 0.49 0.49
0.49 0.49 0.49 0.49 0.49 0.8 0.8 0.8 0.8 0.8 0.8 0.8 0.8 0.8 0.8 0.8
0.8 0.8 0.8 0.8 0.8 0.36 0.36 0.36 0.36 0.36 0.36 0.36 0.36 0.36 0.36
0.36 0.36 0.36 0.36 0.36 0.36 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9
0.9 0.9 0.9 0.9 0.9 0.9 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25
0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9
0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.64 0.64 0.64 0.64 0.64 0.64 0.64
0.64 0.64 0.64 0.64 0.64 0.64 0.64 0.64 0.64 0.9 0.9 0.9 0.9 0.9 0.9
0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.58 0.58 0.58 0.58 0.58 0.58
0.58 0.58 0.58 0.58 0.58 0.58 0.58 0.58 0.58 0.58 0.9 0.9 0.9 0.9 0.9
0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.23 0.23 0.23 0.23 0.23
0.23 0.23 0.23 0.23 0.23 0.23 0.23 0.23 0.23 0.23 0.23 0.9 0.9 0.9
0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9
0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.9 0.66 0.66 0.66 0.66
0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.66 0.4 0.4
0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4;
#X coords 0 1 255 -0.01 400 60 1 0 0;
#X restore 290 36 graph;
#X text 279 87 0;
#X text 279 27 1;
#X text 282 98 0 Hz;
#X obj 569 12 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -262144
-1;
#X text 591 10 <= RESET;
#X obj -238 124 inlet~;
#X text 324 17 (click and drag curve with mouse);
#N canvas 984 211 412 287 Hann-window 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-hann 512 float 0;
#X coords 0 1 511 0 200 120 1;
#X restore 184 42 graph;
#X msg 126 126 0;
#X obj 20 175 osc~;
#X obj 20 127 samplerate~;
#X obj 20 198 *~ -0.5;
#X obj 20 221 +~ 0.5;
#X obj 12 246 tabwrite~ \$0-hann;
#X text 170 34 1;
#X text 163 152 0;
#X text 179 165 0;
#X obj 20 151 / 512;
#X obj 12 104 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 249 15 Hann window;
#X text 68 173 period 512;
#X obj 12 9 loadbang;
#X msg 34 42 \; pd dsp 1;
#X text 365 168 511;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 10 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 10 0 2 0;
#X connect 11 0 3 0;
#X connect 11 0 1 0;
#X connect 11 0 6 0;
#X connect 14 0 11 0;
#X connect 14 0 15 0;
#X restore -176 125 pd Hann-window;
#X text 469 99 11 KHz;
#X text 366 99 5.5 KHz;
#X text 566 99 16.5 KHz;
#X text -78 124 <= precompute Hanning window;
#X text -136 159 <= scale the spectrum;
#X obj 320 -98 inlet;
#X obj 642 183 f \$1;
#X msg 640 208 const \$1;
#X msg 641 157 0.9;
#X obj 376 1 cnv 15 1 1 empty empty Gain 20 12 0 14 -163519 -66577
0;
#X obj 106 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 9100 1;
#X floatatom 106 104 2 0 9 0 - - -;
#X obj 105 127 * 10;
#X msg 105 150 8;
#X obj 116 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 4900 1;
#X floatatom 116 104 2 0 9 0 - - -;
#X obj 115 127 * 10;
#X obj 126 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 8000 1;
#X floatatom 126 104 2 0 9 0 - - -;
#X obj 125 127 * 10;
#X obj 136 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 3600 1;
#X floatatom 136 104 2 0 9 0 - - -;
#X obj 135 127 * 10;
#X obj 146 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 0 1;
#X floatatom 146 104 2 0 9 0 - - -;
#X obj 145 127 * 10;
#X obj 156 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 2500 1;
#X floatatom 156 104 2 0 9 0 - - -;
#X obj 155 127 * 10;
#X obj 166 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 0 1;
#X floatatom 166 104 2 0 9 0 - - -;
#X obj 165 127 * 10;
#X obj 176 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 6400 1;
#X floatatom 176 104 2 0 9 0 - - -;
#X obj 175 127 * 10;
#X msg 115 150 24;
#X msg 125 150 40;
#X msg 135 150 56;
#X msg 145 150 72;
#X msg 155 150 88;
#X msg 165 150 104;
#X msg 175 150 120;
#X obj 186 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 0 1;
#X floatatom 186 104 2 0 9 0 - - -;
#X obj 185 127 * 10;
#X obj 196 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 5800 1;
#X floatatom 196 104 2 0 9 0 - - -;
#X obj 195 127 * 10;
#X obj 206 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 0 1;
#X floatatom 206 104 2 0 9 0 - - -;
#X obj 205 127 * 10;
#X obj 216 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 2300 1;
#X floatatom 216 104 2 0 9 0 - - -;
#X obj 215 127 * 10;
#X obj 226 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 0 1;
#X floatatom 226 104 2 0 9 0 - - -;
#X obj 225 127 * 10;
#X obj 236 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 0 1;
#X floatatom 236 104 2 0 9 0 - - -;
#X obj 235 127 * 10;
#X obj 246 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 6600 1;
#X floatatom 246 104 2 0 9 0 - - -;
#X obj 245 127 * 10;
#X obj 256 2 vsl 10 100 0 0.99 0 0 gain_value empty empty 0 -9 0 10
-262144 -258113 -1 4000 1;
#X floatatom 256 104 2 0 9 0 - - -;
#X obj 255 127 * 10;
#X msg 185 150 136;
#X msg 195 150 152;
#X msg 205 150 168;
#X msg 215 150 184;
#X msg 225 150 200;
#X msg 235 150 216;
#X msg 245 150 232;
#X msg 255 150 248;
#X floatatom 105 172 2 0 0 0 - - -;
#X floatatom 115 172 2 0 0 0 - - -;
#X floatatom 125 172 2 0 0 0 - - -;
#X floatatom 135 172 2 0 0 0 - - -;
#X floatatom 145 172 2 0 0 0 - - -;
#X floatatom 155 172 2 0 0 0 - - -;
#X floatatom 165 172 2 0 0 0 - - -;
#X floatatom 175 172 2 0 0 0 - - -;
#X floatatom 184 172 2 0 0 0 - - -;
#X floatatom 194 172 2 0 0 0 - - -;
#X floatatom 204 172 2 0 0 0 - - -;
#X floatatom 214 172 2 0 0 0 - - -;
#X floatatom 224 172 2 0 0 0 - - -;
#X floatatom 234 172 2 0 0 0 - - -;
#X floatatom 244 172 2 0 0 0 - - -;
#X floatatom 254 172 2 0 0 0 - - -;
#X floatatom 506 238 5 0 0 0 - - -;
#X obj 232 245 tabwrite \$0-gain;
#X floatatom 56 227 5 0 0 0 - - -;
#X obj 325 225 + 7;
#X obj 309 267 + 6;
#X obj 216 287 tabwrite \$0-gain;
#X obj 201 328 tabwrite \$0-gain;
#X obj 186 368 tabwrite \$0-gain;
#X obj 171 409 tabwrite \$0-gain;
#X obj 155 449 tabwrite \$0-gain;
#X obj 140 489 tabwrite \$0-gain;
#X obj 123 529 tabwrite \$0-gain;
#X obj 107 569 tabwrite \$0-gain;
#X obj 91 609 tabwrite \$0-gain;
#X obj 76 649 tabwrite \$0-gain;
#X obj 61 689 tabwrite \$0-gain;
#X obj 294 308 + 5;
#X obj 279 348 + 4;
#X obj 264 389 + 3;
#X obj 248 429 + 2;
#X obj 233 469 + 1;
#X obj 216 509 + 0;
#X obj 200 549 - 1;
#X obj 184 589 - 2;
#X obj 169 629 - 3;
#X obj 154 669 - 4;
#X obj 138 709 - 5;
#X obj 45 729 tabwrite \$0-gain;
#X obj 30 769 tabwrite \$0-gain;
#X obj 123 749 - 6;
#X obj 106 790 - 7;
#X obj 13 810 tabwrite \$0-gain;
#X obj -3 850 tabwrite \$0-gain;
#X obj 90 830 - 8;
#X obj 59 -100 inlet;
#X text 660 99 22 KHz;
#X obj 59 -74 unpack f f f f f f f f f f f f f f f f f;
#X msg -37 -67 0.9;
#X connect 3 0 2 0;
#X connect 5 0 23 0;
#X connect 10 0 142 0;
#X connect 10 0 21 0;
#X connect 12 0 3 0;
#X connect 20 0 10 0;
#X connect 21 0 22 0;
#X connect 22 0 4 0;
#X connect 23 0 21 0;
#X connect 25 0 27 0;
#X connect 25 0 28 0;
#X connect 25 0 89 0;
#X connect 27 0 26 0;
#X connect 28 0 105 0;
#X connect 29 0 31 0;
#X connect 29 0 50 0;
#X connect 29 0 90 0;
#X connect 31 0 30 0;
#X connect 32 0 34 0;
#X connect 32 0 51 0;
#X connect 32 0 91 0;
#X connect 34 0 33 0;
#X connect 35 0 37 0;
#X connect 35 0 52 0;
#X connect 35 0 92 0;
#X connect 37 0 36 0;
#X connect 38 0 40 0;
#X connect 38 0 53 0;
#X connect 38 0 93 0;
#X connect 40 0 39 0;
#X connect 41 0 43 0;
#X connect 41 0 54 0;
#X connect 41 0 94 0;
#X connect 43 0 42 0;
#X connect 44 0 46 0;
#X connect 44 0 55 0;
#X connect 44 0 95 0;
#X connect 46 0 45 0;
#X connect 47 0 49 0;
#X connect 47 0 56 0;
#X connect 47 0 96 0;
#X connect 49 0 48 0;
#X connect 50 0 105 0;
#X connect 51 0 105 0;
#X connect 52 0 105 0;
#X connect 53 0 105 0;
#X connect 54 0 105 0;
#X connect 55 0 105 0;
#X connect 56 0 105 0;
#X connect 57 0 59 0;
#X connect 57 0 81 0;
#X connect 57 0 97 0;
#X connect 59 0 58 0;
#X connect 60 0 62 0;
#X connect 60 0 82 0;
#X connect 60 0 98 0;
#X connect 62 0 61 0;
#X connect 63 0 65 0;
#X connect 63 0 83 0;
#X connect 63 0 99 0;
#X connect 65 0 64 0;
#X connect 66 0 68 0;
#X connect 66 0 84 0;
#X connect 66 0 100 0;
#X connect 68 0 67 0;
#X connect 69 0 71 0;
#X connect 69 0 85 0;
#X connect 69 0 101 0;
#X connect 71 0 70 0;
#X connect 72 0 74 0;
#X connect 72 0 86 0;
#X connect 72 0 102 0;
#X connect 74 0 73 0;
#X connect 75 0 77 0;
#X connect 75 0 87 0;
#X connect 75 0 103 0;
#X connect 77 0 76 0;
#X connect 78 0 80 0;
#X connect 78 0 88 0;
#X connect 78 0 104 0;
#X connect 80 0 79 0;
#X connect 81 0 105 0;
#X connect 82 0 105 0;
#X connect 83 0 105 0;
#X connect 84 0 105 0;
#X connect 85 0 105 0;
#X connect 86 0 105 0;
#X connect 87 0 105 0;
#X connect 88 0 105 0;
#X connect 89 0 107 0;
#X connect 90 0 107 0;
#X connect 91 0 107 0;
#X connect 92 0 107 0;
#X connect 93 0 107 0;
#X connect 94 0 107 0;
#X connect 95 0 107 0;
#X connect 96 0 107 0;
#X connect 97 0 107 0;
#X connect 98 0 107 0;
#X connect 99 0 107 0;
#X connect 100 0 107 0;
#X connect 101 0 107 0;
#X connect 102 0 107 0;
#X connect 103 0 107 0;
#X connect 104 0 107 0;
#X connect 105 0 109 0;
#X connect 105 0 108 0;
#X connect 105 0 121 0;
#X connect 105 0 122 0;
#X connect 105 0 123 0;
#X connect 105 0 125 0;
#X connect 105 0 124 0;
#X connect 105 0 126 0;
#X connect 105 0 127 0;
#X connect 105 0 128 0;
#X connect 105 0 129 0;
#X connect 105 0 130 0;
#X connect 105 0 134 0;
#X connect 105 0 135 0;
#X connect 105 0 131 0;
#X connect 105 0 138 0;
#X connect 107 0 106 0;
#X connect 107 0 110 0;
#X connect 107 0 111 0;
#X connect 107 0 112 0;
#X connect 107 0 113 0;
#X connect 107 0 114 0;
#X connect 107 0 115 0;
#X connect 107 0 116 0;
#X connect 107 0 117 0;
#X connect 107 0 118 0;
#X connect 107 0 119 0;
#X connect 107 0 120 0;
#X connect 107 0 132 0;
#X connect 107 0 133 0;
#X connect 107 0 136 0;
#X connect 107 0 137 0;
#X connect 108 0 106 1;
#X connect 109 0 110 1;
#X connect 121 0 111 1;
#X connect 122 0 112 1;
#X connect 123 0 113 1;
#X connect 124 0 114 1;
#X connect 125 0 115 1;
#X connect 126 0 116 1;
#X connect 127 0 117 1;
#X connect 128 0 118 1;
#X connect 129 0 119 1;
#X connect 130 0 120 1;
#X connect 131 0 132 1;
#X connect 134 0 133 1;
#X connect 135 0 136 1;
#X connect 138 0 137 1;
#X connect 139 0 141 0;
#X connect 141 1 25 0;
#X connect 141 2 29 0;
#X connect 141 3 32 0;
#X connect 141 4 35 0;
#X connect 141 5 38 0;
#X connect 141 6 41 0;
#X connect 141 7 44 0;
#X connect 141 8 47 0;
#X connect 141 9 57 0;
#X connect 141 10 60 0;
#X connect 141 11 63 0;
#X connect 141 12 66 0;
#X connect 141 13 69 0;
#X connect 141 14 72 0;
#X connect 141 15 75 0;
#X connect 141 16 78 0;
#X connect 142 0 25 0;
#X connect 142 0 29 0;
#X connect 142 0 32 0;
#X connect 142 0 35 0;
#X connect 142 0 38 0;
#X connect 142 0 41 0;
#X connect 142 0 44 0;
#X connect 142 0 47 0;
#X connect 142 0 57 0;
#X connect 142 0 60 0;
#X connect 142 0 63 0;
#X connect 142 0 66 0;
#X connect 142 0 69 0;
#X connect 142 0 72 0;
#X connect 142 0 75 0;
#X connect 142 0 78 0;
#X coords 0 -1 1 1 600 120 2 105 0;
